{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/src/actions/auth.ts"],"sourcesContent":["'use server'\n\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\nimport { api } from '@/lib/api'\n\nexport async function login(prevState: any, formData: FormData) {\n    const email = formData.get('email') as string\n    const password = formData.get('password') as string\n\n    try {\n        const response = await api.auth.login({ email, password })\n\n        const cookieStore = await cookies()\n        cookieStore.set('access_token', response.access_token, {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === 'production',\n            maxAge: 60 * 60 * 24 * 7, // 1 week\n            path: '/',\n        })\n\n        cookieStore.set('refresh_token', response.refresh_token, {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === 'production',\n            maxAge: 60 * 60 * 24 * 30, // 30 days\n            path: '/',\n        })\n\n    } catch (error) {\n        return { error: 'Неверный email или пароль' }\n    }\n\n    redirect('/cms/dashboard')\n}\n\nexport async function logout() {\n    const cookieStore = await cookies()\n    cookieStore.delete('access_token')\n    cookieStore.delete('refresh_token')\n    redirect('/login')\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;;;;;;AAEO,eAAe,MAAM,SAAc,EAAE,QAAkB;IAC1D,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI;QACA,MAAM,WAAW,MAAM,uIAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YAAE;YAAO;QAAS;QAExD,MAAM,cAAc,MAAM,IAAA,0IAAO;QACjC,YAAY,GAAG,CAAC,gBAAgB,SAAS,YAAY,EAAE;YACnD,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK,KAAK;YACvB,MAAM;QACV;QAEA,YAAY,GAAG,CAAC,iBAAiB,SAAS,aAAa,EAAE;YACrD,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK,KAAK;YACvB,MAAM;QACV;IAEJ,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,OAAO;QAA4B;IAChD;IAEA,IAAA,iMAAQ,EAAC;AACb;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;IACnB,YAAY,MAAM,CAAC;IACnB,IAAA,iMAAQ,EAAC;AACb;;;IAlCsB;IA6BA;;AA7BA,+OAAA;AA6BA,+OAAA"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/src/actions/articles.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { redirect } from 'next/navigation'\nimport { getServerApi } from '@/lib/api'\nimport { ContentFormValues } from '@/components/content/content-form'\n\nexport async function createArticle(data: ContentFormValues) {\n    const api = await getServerApi();\n\n    try {\n        await api.request('/cms/editor/content', {\n            method: 'POST',\n            body: JSON.stringify(data),\n        });\n    } catch (error) {\n        if (error instanceof Error) {\n            return { error: error.message };\n        }\n        return { error: 'Не удалось создать статью' };\n    }\n\n    revalidatePath('/cms/editor');\n    redirect('/cms/editor');\n}\n\nexport async function updateArticle(id: number, data: ContentFormValues) {\n    const api = await getServerApi();\n\n    try {\n        await api.request(`/cms/editor/content/${id}`, {\n            method: 'PUT',\n            body: JSON.stringify(data),\n        });\n    } catch (error) {\n        if (error instanceof Error) {\n            return { error: error.message };\n        }\n        return { error: 'Не удалось обновить статью' };\n    }\n\n    revalidatePath('/cms/editor');\n    revalidatePath(`/cms/editor/${id}`);\n    redirect('/cms/editor');\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;;;;;;AAGO,eAAe,cAAc,IAAuB;IACvD,MAAM,MAAM,MAAM,IAAA,gJAAY;IAE9B,IAAI;QACA,MAAM,IAAI,OAAO,CAAC,uBAAuB;YACrC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACzB;IACJ,EAAE,OAAO,OAAO;QACZ,IAAI,iBAAiB,OAAO;YACxB,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAClC;QACA,OAAO;YAAE,OAAO;QAA4B;IAChD;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,iMAAQ,EAAC;AACb;AAEO,eAAe,cAAc,EAAU,EAAE,IAAuB;IACnE,MAAM,MAAM,MAAM,IAAA,gJAAY;IAE9B,IAAI;QACA,MAAM,IAAI,OAAO,CAAC,CAAC,oBAAoB,EAAE,IAAI,EAAE;YAC3C,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACzB;IACJ,EAAE,OAAO,OAAO;QACZ,IAAI,iBAAiB,OAAO;YACxB,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAClC;QACA,OAAO;YAAE,OAAO;QAA6B;IACjD;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,+IAAc,EAAC,CAAC,YAAY,EAAE,IAAI;IAClC,IAAA,iMAAQ,EAAC;AACb;;;IArCsB;IAmBA;;AAnBA,+OAAA;AAmBA,+OAAA"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/src/actions/submit-review.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { redirect } from 'next/navigation'\nimport { getServerApi } from '@/lib/api'\n\nexport async function submitForReview(id: number) {\n    const api = await getServerApi();\n\n    try {\n        await api.request(`/cms/editor/content/${id}/submit`, {\n            method: 'POST',\n        });\n    } catch (error) {\n        if (error instanceof Error) {\n            return { error: error.message };\n        }\n        return { error: 'Не удалось отправить на проверку' };\n    }\n\n    revalidatePath('/cms/editor');\n    revalidatePath(`/cms/editor/${id}`);\n    redirect('/cms/editor');\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;;;;;;AAEO,eAAe,gBAAgB,EAAU;IAC5C,MAAM,MAAM,MAAM,IAAA,gJAAY;IAE9B,IAAI;QACA,MAAM,IAAI,OAAO,CAAC,CAAC,oBAAoB,EAAE,GAAG,OAAO,CAAC,EAAE;YAClD,QAAQ;QACZ;IACJ,EAAE,OAAO,OAAO;QACZ,IAAI,iBAAiB,OAAO;YACxB,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAClC;QACA,OAAO;YAAE,OAAO;QAAmC;IACvD;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,+IAAc,EAAC,CAAC,YAAY,EAAE,IAAI;IAClC,IAAA,iMAAQ,EAAC;AACb;;;IAjBsB;;AAAA,+OAAA"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/src/actions/media.ts"],"sourcesContent":["'use server'\n\nimport { getServerApi } from \"@/lib/api\";\n\nexport async function uploadMediaAction(formData: FormData) {\n    const file = formData.get(\"file\") as File;\n    if (!file) {\n        return { error: \"Файл не найден\" };\n    }\n\n    try {\n        const api = await getServerApi();\n        // Use the public upload method we added to APIClient, but we need to ensure credentials are correct.\n        // getServerApi sets the token automatically.\n        // However, api.media.upload creates a NEW FormData. \n        // We can just reuse the file object.\n\n        return await api.media.upload(file);\n    } catch (error) {\n        // Log the error for debugging\n        console.error(\"Upload error:\", error);\n\n        if (error instanceof Error) {\n            // Check for 403 specifically\n            if (error.message.includes(\"403\")) {\n                return { error: \"Нет прав на загрузку изображений (403). Проверьте активность аккаунта.\" };\n            }\n            return { error: error.message };\n        }\n        return { error: \"Ошибка при загрузке файла\" };\n    }\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;AAEO,eAAe,kBAAkB,QAAkB;IACtD,MAAM,OAAO,SAAS,GAAG,CAAC;IAC1B,IAAI,CAAC,MAAM;QACP,OAAO;YAAE,OAAO;QAAiB;IACrC;IAEA,IAAI;QACA,MAAM,MAAM,MAAM,IAAA,gJAAY;QAC9B,qGAAqG;QACrG,6CAA6C;QAC7C,qDAAqD;QACrD,qCAAqC;QAErC,OAAO,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC;IAClC,EAAE,OAAO,OAAO;QACZ,8BAA8B;QAC9B,QAAQ,KAAK,CAAC,iBAAiB;QAE/B,IAAI,iBAAiB,OAAO;YACxB,6BAA6B;YAC7B,IAAI,MAAM,OAAO,CAAC,QAAQ,CAAC,QAAQ;gBAC/B,OAAO;oBAAE,OAAO;gBAAyE;YAC7F;YACA,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAClC;QACA,OAAO;YAAE,OAAO;QAA4B;IAChD;AACJ;;;IA3BsB;;AAAA,+OAAA"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/.next-internal/server/app/cms/editor/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logout as '006be408f301c3b0a72fcb75c3d6af7213e8a6f67b'} from 'ACTIONS_MODULE0'\nexport {createArticle as '4038b89fb6d80d7532c31e7d2452e717b58437e3c3'} from 'ACTIONS_MODULE1'\nexport {updateArticle as '60d26ef130245f7e572d4aec6218e30d9031f72e11'} from 'ACTIONS_MODULE1'\nexport {submitForReview as '40a34e96a6f1d8e0ac012c6bba6d76c3ab56aabe08'} from 'ACTIONS_MODULE2'\nexport {uploadMediaAction as '40de0d771300a7b0924ae0e2affabf73227acfd4be'} from 'ACTIONS_MODULE3'\n"],"names":[],"mappings":";AAAA;AACA;AAEA;AACA"}}]
}