{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/src/actions/auth.ts"],"sourcesContent":["'use server'\n\nimport { cookies } from 'next/headers'\nimport { redirect } from 'next/navigation'\nimport { api } from '@/lib/api'\n\nexport async function login(prevState: any, formData: FormData) {\n    const email = formData.get('email') as string\n    const password = formData.get('password') as string\n\n    try {\n        const response = await api.auth.login({ email, password })\n\n        const cookieStore = await cookies()\n        cookieStore.set('access_token', response.access_token, {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === 'production',\n            maxAge: 60 * 60 * 24 * 7, // 1 week\n            path: '/',\n        })\n\n        cookieStore.set('refresh_token', response.refresh_token, {\n            httpOnly: true,\n            secure: process.env.NODE_ENV === 'production',\n            maxAge: 60 * 60 * 24 * 30, // 30 days\n            path: '/',\n        })\n\n    } catch (error) {\n        return { error: 'Неверный email или пароль' }\n    }\n\n    redirect('/cms/dashboard')\n}\n\nexport async function logout() {\n    const cookieStore = await cookies()\n    cookieStore.delete('access_token')\n    cookieStore.delete('refresh_token')\n    redirect('/login')\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;;;;;;AAEO,eAAe,MAAM,SAAc,EAAE,QAAkB;IAC1D,MAAM,QAAQ,SAAS,GAAG,CAAC;IAC3B,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI;QACA,MAAM,WAAW,MAAM,uIAAG,CAAC,IAAI,CAAC,KAAK,CAAC;YAAE;YAAO;QAAS;QAExD,MAAM,cAAc,MAAM,IAAA,0IAAO;QACjC,YAAY,GAAG,CAAC,gBAAgB,SAAS,YAAY,EAAE;YACnD,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK,KAAK;YACvB,MAAM;QACV;QAEA,YAAY,GAAG,CAAC,iBAAiB,SAAS,aAAa,EAAE;YACrD,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK,KAAK;YACvB,MAAM;QACV;IAEJ,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,OAAO;QAA4B;IAChD;IAEA,IAAA,iMAAQ,EAAC;AACb;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;IACnB,YAAY,MAAM,CAAC;IACnB,IAAA,iMAAQ,EAAC;AACb;;;IAlCsB;IA6BA;;AA7BA,+OAAA;AA6BA,+OAAA"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/src/actions/review.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { redirect } from 'next/navigation'\nimport { getServerApi } from '@/lib/api'\n\nexport async function approveContent(id: number) {\n    const api = await getServerApi();\n\n    try {\n        await api.request(`/cms/chief-editor/content/${id}/approve`, {\n            method: 'POST',\n        });\n    } catch (error) {\n        if (error instanceof Error) {\n            return { error: error.message };\n        }\n        return { error: 'Не удалось одобрить материал' };\n    }\n\n    revalidatePath('/cms/chief-editor');\n    redirect('/cms/chief-editor');\n}\n\nexport async function requestRevision(id: number, formData: FormData) {\n    const api = await getServerApi();\n    const comment = formData.get('comment') as string;\n\n    if (!comment) {\n        return { error: 'Необходимо указать комментарий' };\n    }\n\n    try {\n        await api.request(`/cms/chief-editor/content/${id}/request-revision`, {\n            method: 'POST',\n            body: JSON.stringify({ comment }),\n        });\n    } catch (error) {\n        if (error instanceof Error) {\n            return { error: error.message };\n        }\n        return { error: 'Не удалось отправить на доработку' };\n    }\n\n    revalidatePath('/cms/chief-editor');\n    redirect('/cms/chief-editor');\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAAA;AACA;;;;;;AAEO,eAAe,eAAe,EAAU;IAC3C,MAAM,MAAM,MAAM,IAAA,gJAAY;IAE9B,IAAI;QACA,MAAM,IAAI,OAAO,CAAC,CAAC,0BAA0B,EAAE,GAAG,QAAQ,CAAC,EAAE;YACzD,QAAQ;QACZ;IACJ,EAAE,OAAO,OAAO;QACZ,IAAI,iBAAiB,OAAO;YACxB,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAClC;QACA,OAAO;YAAE,OAAO;QAA+B;IACnD;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,iMAAQ,EAAC;AACb;AAEO,eAAe,gBAAgB,EAAU,EAAE,QAAkB;IAChE,MAAM,MAAM,MAAM,IAAA,gJAAY;IAC9B,MAAM,UAAU,SAAS,GAAG,CAAC;IAE7B,IAAI,CAAC,SAAS;QACV,OAAO;YAAE,OAAO;QAAiC;IACrD;IAEA,IAAI;QACA,MAAM,IAAI,OAAO,CAAC,CAAC,0BAA0B,EAAE,GAAG,iBAAiB,CAAC,EAAE;YAClE,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAQ;QACnC;IACJ,EAAE,OAAO,OAAO;QACZ,IAAI,iBAAiB,OAAO;YACxB,OAAO;gBAAE,OAAO,MAAM,OAAO;YAAC;QAClC;QACA,OAAO;YAAE,OAAO;QAAoC;IACxD;IAEA,IAAA,+IAAc,EAAC;IACf,IAAA,iMAAQ,EAAC;AACb;;;IAxCsB;IAkBA;;AAlBA,+OAAA;AAkBA,+OAAA"}},
    {"offset": {"line": 139, "column": 0}, "map": {"version":3,"sources":["file:///Users/alikhanzhumabayev/Downloads/qazaq_full_project/frontend/apps/cms/.next-internal/server/app/cms/chief-editor/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {logout as '006be408f301c3b0a72fcb75c3d6af7213e8a6f67b'} from 'ACTIONS_MODULE0'\nexport {approveContent as '406e5b94ef0258a7e6be257f3f7ee23b73a4a302b5'} from 'ACTIONS_MODULE1'\nexport {requestRevision as '60db9213b5d956fb9dd5577893933af69ead36aa22'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AACA"}}]
}